<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FSA JAMB CBT PRO</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

<style>
body{
  background:#0f111a;
  color:white;
  font-family:Segoe UI,sans-serif;
}
.section{display:none;padding:20px}
.section.active{display:block}
.card-ui{
  background:#1e1f2b;
  border-radius:18px;
  padding:25px;
  text-align:center;
  cursor:pointer;
  transition:.3s;
}
.card-ui:hover{transform:translateY(-5px);border:1px solid #0d6efd}
.option{
  background:#161722;
  padding:15px;
  border-radius:12px;
  margin:8px 0;
  cursor:pointer;
}
.option:hover{background:#0d6efd}
</style>
</head>

<body>

<!-- HOME / LOCK SCREEN -->
<section id="home" class="section active">
  <h3 class="fw-bold">FSA JAMB CBT PRO</h3>

  <div class="alert alert-warning" id="lockBox">
    <b>Access Locked</b><br>
    Enter activation key to unlock full CBT practice

    <input id="keyInput" class="form-control mt-2" placeholder="Enter activation key">

    <button class="btn btn-success mt-2 w-100" onclick="activate()">
      Activate
    </button>

    <a href="https://wa.me/2349131546480" target="_blank"
       class="btn btn-outline-success w-100 mt-2">
      <i class="fab fa-whatsapp"></i> Message Admin (09131546480)
    </a>
  </div>

  <div class="row mt-3" id="subjects"></div>
</section>

<!-- EXAM SCREEN -->
<section id="exam" class="section">
  <h5 id="subjectTitle"></h5>
  <div id="questionText" class="fw-bold my-3"></div>
  <div id="options"></div>

  <button class="btn btn-secondary mt-3" onclick="nextQuestion()">Next</button>
</section>

<!-- RESULT -->
<section id="result" class="section text-center">
  <h3>Result</h3>
  <h1 id="finalScore"></h1>
  <button class="btn btn-primary" onclick="show('home')">Back Home</button>
</section>

<script>
/* ================= CONFIG ================= */

const SUBJECTS = [
  "english",
  "mathematics",
  "biology",
  "chemistry",
  "physics",
  "government",
  "economics"
];

const MASTER_KEY = "FSA-JAMB-2026";   // ðŸ”‘ ACTIVATION KEY
const ACCESS_DAYS = 30;               // â³ VALIDITY

/* ================ VARIABLES ================ */

let questions = [];
let index = 0;
let score = 0;
let currentSubject = "";

/* ================= FUNCTIONS ================= */

function show(id){
  document.querySelectorAll(".section").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

function activate(){
  const key = document.getElementById("keyInput").value.trim();

  if(key === MASTER_KEY){
    const expiry = Date.now() + ACCESS_DAYS*24*60*60*1000;
    localStorage.setItem("fsa_access","true");
    localStorage.setItem("fsa_expiry",expiry);
    alert("Activation successful");
    loadSubjects();
  }else{
    alert("Invalid activation key");
    window.open("https://wa.me/2349131546480");
  }
}

function checkAccess(){
  const ok = localStorage.getItem("fsa_access");
  const exp = Number(localStorage.getItem("fsa_expiry"));
  if(ok && Date.now() < exp) return true;
  localStorage.clear();
  return false;
}

function loadSubjects(){
  if(!checkAccess()) return;

  document.getElementById("lockBox").style.display="none";

  document.getElementById("subjects").innerHTML =
    SUBJECTS.map(s=>`
      <div class="col-6 mb-3">
        <div class="card-ui" onclick="startExam('${s}')">
          ${s.toUpperCase()}
        </div>
      </div>
    `).join("");
}

async function startExam(sub){
  currentSubject = sub;
  index = 0;
  score = 0;

  const res = await fetch(sub + ".json");
  questions = await res.json();

  document.getElementById("subjectTitle").innerText = sub.toUpperCase();
  show("exam");
  loadQuestion();
}

function loadQuestion(){
  const q = questions[index];
  document.getElementById("questionText").innerHTML =
    `Q${index+1}. ${q.q}`;

  document.getElementById("options").innerHTML =
    q.options.map((o,i)=>`
      <div class="option"
           onclick="select('${String.fromCharCode(97+i)}')">
        ${o}
      </div>
    `).join("");
}

function select(ans){
  if(ans === questions[index].answer) score++;
  nextQuestion();
}

function nextQuestion(){
  index++;
  if(index >= questions.length){
    endExam();
  }else{
    loadQuestion();
  }
}

function endExam(){
  const percent = Math.round((score/questions.length)*100);
  document.getElementById("finalScore").innerText = percent + "%";
  show("result");
}

window.onload = loadSubjects;
</script>

</body>
</html>
